### Running the tracking reconstruction from scratch for user generated MC  

Much credit goes towards Matti Kortelainen and Kevin Stenson for this recipe.  Please note: This has only been validated for CMSSW_7_0_0 and above.  

I have included configuration file ```recoTrk_userMC_cfg.py``` generated from cmsDriver.py that will run the tracking reconstruction given some initial MC sample.  This (presumably) works for any already generated MC sample that has the necessary steps listed below. The initial MC sample can generated in the following way:

```
cmsDriver.py <Sample-cfi.py-file> -s GEN,SIM,DIGI,L1,DIGI2RAW,HLT --conditions auto:startup --eventcontent FEVTDEBUGHLT  -n <number of events> --no_exec
```

The ```<Sample-cfi.py-file>``` is the configuration file for a generic MC sample, where a plethora can be found in:  /uscmst1/prod/sw/cms/slc5_amd64_gccABC/cms/cmssw/CMSSW_X_Y_Z/src/Configuration/Generator/python/
or, with github:
https://github.com/kmcdermo/cmssw/tree/CMSSW_X_Y_Z/Configuration/Generator/python

I choose TTbar at 8TeV for starters, as it seems to be the consensus benchmark for any sort of tracking performance analysis, i.e. ```TTbar_8TeV_cfi.py```. 

After running cmsDriver once, it will generate a python configuration file that then can be run with cmsRun to generate the MC.  To run, simply do: ```cmsRun <auto-generated-cfg.py-file>```.  This will create MC generated ROOT file with the path and name given by the autogenerated config file (which you can change yourself before running by editting the config file).  If you would rather just jump straight to generating and not create the python config file, drop the "--no_exec" option. 

From here, you will need to go into the ```recoTrk_userMC_cfg.py``` and make some small changes. On line 20, indicate the number of events you wish to run over, -1 being the default for all events.  On line 30 you will need to edit the filename and path to the file to match the ROOT output from the generation.  The string ```'file:<file.root>'``` indicates that the file is located locally.  To have python find a file published to DAS, provide the full path on that line and removed the ```'file:'``` string.  You can also change the name/path of the output of the trackin on line 50. 

To run, simply type ```cmsRun recoTrk_userMC_cfg.py```. 

If you would rather generate the tracking reco config file yourself instead of using ```recoTrk_userMC_cfg.py```, you will need to run cmsDriver.py again with the MC root file produced in the initial MC generation, i.e. ```<path-to-input-root-file>``` in the step below.  Now do the following:

```
cmsDriver.py step3 -s RAW2DIGI,L1Reco,RECO --conditions auto:startup --datatier GEN-SIM-RECO --eventcontent FEVTDEBUGHLT -n <number-of-events> --filein <path-to-input-root-file> --no_exec
```

This will auto generate a python configuration file, ```<auto-gen-RECO-cfg.py-file>```.  You will now have to make some edits to the generated python config file.  Append the end of the document with the following lines:

```python
process.myreconstruction = cms.Sequence(process.trackerlocalreco+
                                        process.muonlocalreco+process.calolocalreco+process.offlineBeamSpot+
                                        process.MeasurementTrackerEvent+
                                        process.siPixelClusterShapeCache+
                                        process.standalonemuontracking+process.recopixelvertexing+process.iterTracking+
                                        process.electronSeedsSeq+process.doAlldEdXEstimators+process.trackExtrapolator+
                                        process.vertexreco+process.logErrorHarvester
                                        )
process.reconstruction_step = cms.Path(process.myreconstruction)
```

Additionally, you will need delete/comment out the first instance of ```process.reconstruction_step = cms.Path()``` and then move the process.schedule line to the end of the python file.  You may also want to change the name of the output root file.  After all the edits have been made, execute with:

```cmsRun <auto-gen-RECO-cfg.py-file>```

### Rerunning the tracking reconstruction with small RelVal Samples

I have also included a small python configuration file to **rerun** the tracking reconstruction.  It works for CMSSW_7_1_0_pre8, using a small RelVal ttbar sample that is currently available.  The goal will obviously be to move to something more stable, but this works fine if you do not want to go through the hassle of generating your own MC sample. 

So after setting up the release area, all you have to do is: ```cmsRun reRecoTrk_cfg.py```


The instructions (and subsequent modifications) came from the following question on CMS HyperNews:
https://hypernews.cern.ch/HyperNews/CMS/get/recoTracking/1438.html

